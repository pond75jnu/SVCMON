# SVCMON - 웹사이트 모니터링 시스템

웹사이트들의 상태를 실시간으로 모니터링하고 관리할 수 있는 Django 기반 웹 애플리케이션입니다.

## 주요 기능

### 대시보드
- 망구분별 모니터링 상태 실시간 표시
- 전체 시스템 통계 및 현황
- 직관적인 상태 표시 (정상/경고/장애)

### 모니터링 관리
- **망구분 관리**: 교내망, KT망, LG망, 해외망 등 네트워크 구분
- **도메인 관리**: 사이트별 도메인 등록 및 관리
- **엔드포인트 관리**: 모니터링 대상 URL 등록 및 설정
- **체크 기록**: 모니터링 결과 이력 조회 및 분석

### 사용자 관리
- 관리자/일반사용자 권한 관리
- 사용자 승인 시스템
- 로그인/로그아웃 기능

## 기술 스택

- **Backend**: Django 5.0.7, Python 3.13
- **Database**: Microsoft SQL Server
- **Frontend**: HTML5, Tailwind CSS, JavaScript
- **Icons**: Lucide Icons
- **Authentication**: Django Auth System

## 설치 및 실행

### 1. 저장소 클론
```bash
git clone https://github.com/pond75jnu/SVCMON.git
cd SVCMON
```

### 2. 가상환경 생성 및 활성화
```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# Linux/Mac
source .venv/bin/activate
```

### 3. 패키지 설치
```bash
cd webapp
pip install -r requirements.txt
```

### 4. 환경변수 설정
```bash
# .env.example 파일을 .env로 복사
cp .env.example .env
# .env 파일을 편집하여 데이터베이스 연결 정보 등을 설정
```

### 5. 데이터베이스 설정
```bash
# 마이그레이션 실행
python manage.py migrate

# 관리자 계정 생성
python manage.py createsuperuser
```

### 6. 서버 실행
```bash
python manage.py runserver
```

브라우저에서 `http://127.0.0.1:8000` 접속

## 환경변수 설정

`.env` 파일에서 다음 환경변수들을 설정해야 합니다:

```properties
# 데이터베이스 설정
DB_NAME=SVCMON
DB_SERVER=your-database-server
DB_TRUSTED_CONNECTION=True

# Django 설정
SECRET_KEY=your-secret-key
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# 이메일 설정 (알림 기능용)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@domain.com
EMAIL_HOST_PASSWORD=your-app-password
```

## 프로젝트 구조

```
SVCMON/
├── console/              # 콘솔 관리 도구
├── database/            # 데이터베이스 스크립트
├── webapp/              # Django 웹 애플리케이션
│   ├── accounts/        # 사용자 관리 앱
│   ├── dashboard/       # 대시보드 앱
│   ├── monitoring/      # 모니터링 관리 앱
│   ├── static/          # 정적 파일
│   ├── templates/       # 템플릿 파일
│   └── svcmon/          # 프로젝트 설정
└── README.md
```

## 주요 모델

### NetworkGroup (망구분)
- 교내망, KT망, LG망, 해외망 등 네트워크 구분

### Domain (도메인)
- 각 사이트의 도메인 정보
- 사이트명, 담당자 정보 포함

### Endpoint (엔드포인트)
- 모니터링 대상 URL
- 체크 주기, 알림 설정 등 포함

### Check (체크 기록)
- 모니터링 결과 저장
- 응답시간, 상태코드, 오류 메시지 등

## 개발 정보

- **연락처**: pond75@jnu.ac.kr
- **라이선스**: MIT License

## 기여하기

1. 이 저장소를 포크합니다
2. 새로운 기능 브랜치를 생성합니다 (`git checkout -b feature/new-feature`)
3. 변경사항을 커밋합니다 (`git commit -am 'Add new feature'`)
4. 브랜치에 푸시합니다 (`git push origin feature/new-feature`)
5. Pull Request를 생성합니다

## 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 자세한 내용은 [LICENSE](LICENSE) 파일을 참조하세요.

---

## 기존 요구사항 (참고용) 	- 모니터링 하고자 하는 웹 URL 등록

 		- 3단계 카테고리화 하여 등록

 		- 1단계 등록: 망구분(예시: 교내망, KT망, LG망, 해외망 등)

 		- 2단계 등록: 도메인, 사이트명, 담당자명, 비고

 		- 3단계 등록: 1단계 등록된 도메인 기준으로 모니터링 할 url 등록, DB연결 여부(해당 URL이 DB연결이 필요한 페이지 인지 여부), 비고

 		- 등록된 망구분, 도메인, url에 대한 수정, 삭제 기능 제공

 	- 모니터링 설정 기능

 		- url등록시 url 호출 주기는 기본 5분으로 자동 등록됨

 		- 등록된 url 호출 주기 설정(초단위, 분단위 입력 가능)

 		- 장애발생시 등록된 사용자에게 이메일 발송 여부

 		- 호출주기는 망구분 하위 전체를 일괄적용할 수도 있고, 도메인별로 일괄 적용할 수도 있으며, 각 url마다 다르게 설정할 수도 있음

 		- 웹 URL 등록시 1단계에서 입력하는 망구분 입력시 다른 망구분 하위의 내용들을 복사하여 등록하는 기능 제공

* url 호출시 저장되는 값

 	- 콘솔 프로그램에 의해 저장되며 http 응답코드, 응답속도, 응답헤더, 호출시간 저장

* 화면 구성

 	- 메뉴 : 홈, 웹url 등록, 모니터링 상태, 모니터링 설정, 회원관리 등

 	- 홈 화면은 대시보드로 구성

 	- 대시보드에는 등록된 망구분이 라운드된 사각박스 형태로 보이며 망구분 명칭이 표시됨

 		- 망구분 하위에 등록된 url중 하나라도 장애가 있으면 붉은색, 하나라도 신호없음이 있으면 노란색, 모두 신호가 있으면서 장애가 없으면 녹색으로 표시됨

 		- 장애가 가장 높은 우선순위임(예를 들어 하위 url에 신호 없는것이 5개이고 장애가 1개이면 붉은색으로 표시됨)

 	- 망구분 박스를 선택하면 하위에 등록된 도메인이 라운드된 사각박스로 도메인, 사이트명, 담당자명이 함께 표시됨

 		- 도메인 하위에 등록된 url중 하나라도 장애가 있으면 붉은색, 하나라도 신호없음이 있으면 노란색, 모두 신호가 있으면서 장애가 없으면 녹색으로 표시됨

 		- 장애가 가장 높은 우선순위임(예를 들어 하위 url에 신호 없는것이 5개이고 장애가 1개이면 붉은색으로 표시됨)

 	- 도메인을 선택하면 하위에 등록된 url이 응답상태값, 호출시간과 함께 형태로 표시(장애일 경우 붉은색, 호출 주기에 따른 응답자체가 없을 경우 노란색 표시)

 	- url 선택시 최근 10번 호출 결과를 꺽은선 그래프로 표시(x축: 호출시간, y축: 응답속도)

*  DBMS 처리

 	- 개발환경에서 제공되는 MS SQL 연결문자열을 사용하여 MS SQL 2019의 SVCMON이라는 DB를 사용할 것

 	- 위 요구사항 처리를 위해 필요한 테이블, 저장프로시저, 함수를 적절하게 만들어 사용할 것

 	- 반드시 모든 데이터베이스 입출력은 저장프로시저를 만들어 사용하고, 저장프로시저 호출을 쉽게 할 수 있는 미들웨어(클래스)를 생성하여 각 모듈에서 사용할 것

* 디자인

 	- tailwind css를 적용하고 성능모니터링(APM) 솔루션의 일반적인 디자인을 적용하며, 모던하고 세련된 디자인 적용

 	- noto sans kr 폰트 적용

* 기타

 	- url 호출시 결과에서 http응답값이 200인 경우를 제외하고 나머지 모두는 장애로 간주(3xx도 장애)



## 2\. 콘솔프로그램

### 1.1. 기본기능

* 웹애플리케이션을 통해 생성된 웹 url들을 설정된 주기에 따라 호출하고 그 결과를 DB에 저장

 	- 호출주기: 망구분, 도메인, url 별로 등록된 id값을 정렬하여 호출하고 호출주기는 호출주기 설정값을 따라 처리

 	- 호출방식: 병렬처리하여 등록된 url들을 호출

 	- 저장되는 값: http 응답코드, 응답속도, 응답헤더, 호출시간 등

* 웹 애플리케이션에서 생성된 망구분에 따라 실행

 	- 콘솔프로그램 실행시 매개변수 옵션으로 해당되는 망구분 하위의 엔드포인트(url)를 읽어와 호출

 	- 망구분 지정시 예시 :  콘솔프로그램명 -n \[망구분id]

&nbsp;	- 매개변수 옵션이 생략될 경우에는 경우에는 가장 첫번째 망구분을 읽어와 처리함

* pywin32를 이용하여 윈도우 서비스로 등록하여 사용하도록 고려하여 개발할 것
* 웹애플리케이션에서 모니터링 설정 등을 변경시 콘솔프로그램이 리셋되도록 설계할 것

 	- url 추가 및 삭제, 호출주기 변경시 리셋

 	- 윈도우서비스 등록하여 사용할 경우, 서비스 재시작되도록 고려하여 설계

